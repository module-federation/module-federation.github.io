<!DOCTYPE html><html><head><meta charSet="utf-8"/><script src="https://www.googletagmanager.com/gtag/js?id=UA-120967034-1"></script><script>
function getUrlParams(search) {
    const hashes = search.slice(search.indexOf('?') + 1).split('&')
    const params = {}
    hashes.map(hash => {
        const [key, val] = hash.split('=')
        params[key] = decodeURIComponent(val)
    })
    return params
}

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120967034-1');
  var redirect = getUrlParams(window.location.href).utm_medium
  if(redirect) window.location.replace(redirect)
</script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started With Federated Modules | Module Federation </title><meta name="description" content="get up and running in 15 minutes"/><meta name="next-head-count" content="6"/><link rel="preload" href="site/_next/static/css/e5ce7903d76aa27060ca.css" as="style"/><link rel="stylesheet" href="site/_next/static/css/e5ce7903d76aa27060ca.css"/><link rel="preload" href="site/_next/static/css/8ab489f185d95243774d.css" as="style"/><link rel="stylesheet" href="site/_next/static/css/8ab489f185d95243774d.css"/><link rel="preload" href="site/_next/static/css/ca46ec4253608f1b20fa.css" as="style"/><link rel="stylesheet" href="site/_next/static/css/ca46ec4253608f1b20fa.css"/><link rel="preload" href="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/pages/blog/%5Bslug%5D.js" as="script"/><link rel="preload" href="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/pages/_app.js" as="script"/><link rel="preload" href="site/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" as="script"/><link rel="preload" href="site/_next/static/chunks/framework.4503cc20512dbab0b6d3.js" as="script"/><link rel="preload" href="site/_next/static/chunks/81873460.37da1e6c94fa5227f4d3.js" as="script"/><link rel="preload" href="site/_next/static/chunks/828ff0247e156aba75f40048f634625636aeb451.3b5c7d87c17d462fd737.js" as="script"/><link rel="preload" href="site/_next/static/runtime/main-8e344e0f74bc3384d55f.js" as="script"/><link rel="preload" href="site/_next/static/chunks/ab6e12f8.ca343003e1fa52c820f5.js" as="script"/><link rel="preload" href="site/_next/static/chunks/15c735495e1507fead7e18fb8ddaf582d98d10e6.964ebf25ef8cc2262175.js" as="script"/></head><body><div id="__next"><div><div class="app-shell_desktop__1Sh7Y"><div><div class="ui inverted vertical segment"><div class="ui large inverted pointing secondary no-print menu"><div class="ui container"><a href="/" class="item">Home</a><a href="/blog/get-started" class="item">Get Started</a><a href="https://medium.com/swlh/webpack-5-module-federation-a-game-changer-to-javascript-architecture-bcdd30e02669" rel="noopener noreferrer" target="blank" class="item">Learn More</a><a href="/blog" class="item">Blog</a><a href="/videos" class="item">Videos</a><div class="right item"><a href="https://github.com/module-federation" rel="noopener noreferrer" target="blank" class="ui inverted button" role="button">GitHub</a></div></div></div><div class="hero_hero__3LLIW"><div class="ui text container"><h1>Getting Started With Federated Modules</h1><h2>get up and running in 15 minutes</h2></div></div></div></div><div class="ui vertical segment article-page_articlePageContent__3XLv8"><div class="ui container stackable middle aligned grid fb"><div class="row"><div class="sixteen wide column"><article class="center-images"><h1 id="a-little-background">A Little Background</h1><p>If you’ve worked as a developer long enough, you’ve ran into the inevitable problem of sharing components between teams. Let’s be real here, how often does this lead to a good experience for anyone?</p><p>I think <a href="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/">Zack Jackson</a>, one of the authors of Webpack Module Federation said it best:</p><blockquote><p>A scalable solution to sharing code between independent applications has never been convenient, and near impossible at scale. The closest we had was externals or DLLPlugin, forcing centralized dependency on a external file. It was a hassle to share code, the separate applications were not truly standalone and usually, a limited number of dependencies are shared. Moreover, sharing actual feature code or components between separately bundled applications is unfeasible, unproductive, and unprofitable.</p></blockquote><p>If you would like to learn more about Webpack Module Federation, you can head over to the and check out <a href="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/" title="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/">https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/</a>.</p><h1 id="what-we-are-building">What We Are Building</h1><p>We are going to build out two separate Single Page Applications (SPA) that use Module Federation to share components during runtime.</p><p><code>Application A</code> will contain a <code>SayHelloFromA</code> component that will be consumed by <code>Application B</code> while <code>Application B</code> will contain a <code>SayHelloFromB</code> component that will be consumed by <code>ApplicationA</code>. This looks like:</p><p><img src="/get-started-diagram.svg" alt=""/></p><p>This architecture will allow each SPA to be developed and deployed independantly along with instantly recieving updates from other federated applications with zero deployments.</p><h1 id="tl;dr">TL;DR</h1><p>You can find the completed source for this example at <a href="https://github.com/jacob-ebey/federated-libraries-get-started">https://github.com/jacob-ebey/federated-libraries-get-started</a>.</p><h1 id="getting-setup">Getting Setup</h1><p>Let’s start by getting our environment configured. We will be using a yarn mono-repo structure here for simplicity, but the idea behind Module Federation is to allow teams to operate autonomously, so in the real world, your SPA’s would most likely live in their own repositories.</p><p>Start by creating a new project folder with the following <code>package.json</code> to allow us to run our two SPAs at the same time:</p><p><strong>package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"federation-example"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"workspaces"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"packages/*"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"wsrun --parallel start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"yarn workspaces run build"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"wsrun --parallel dev"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"wsrun"</span><span class="token operator">:</span> <span class="token string">"^5.2.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We will now create two folders for our SPAs to live in under a new <code>packages</code> directory called <code>application-a</code> and <code>application-b</code>, these will respectively contain the following <code>package.json</code> files:</p><p><strong>packages/application-a/package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"application-a"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"serve dist -p 3001"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \"webpack --watch\" \"serve dist -p 3001\""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@babel/core"</span><span class="token operator">:</span> <span class="token string">"^7.8.6"</span><span class="token punctuation">,</span>
    <span class="token property">"@babel/preset-react"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>
    <span class="token property">"babel-loader"</span><span class="token operator">:</span> <span class="token string">"^8.0.6"</span><span class="token punctuation">,</span>
    <span class="token property">"concurrently"</span><span class="token operator">:</span> <span class="token string">"^5.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"git://github.com/ScriptedAlchemy/html-webpack-plugin#master"</span><span class="token punctuation">,</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"^11.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"git://github.com/webpack/webpack.git#dev-1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.11"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>packages/application-b/package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"application-b"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"serve dist -p 3002"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \"webpack --watch\" \"serve dist -p 3002\""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@babel/core"</span><span class="token operator">:</span> <span class="token string">"^7.8.6"</span><span class="token punctuation">,</span>
    <span class="token property">"@babel/preset-react"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>
    <span class="token property">"babel-loader"</span><span class="token operator">:</span> <span class="token string">"^8.0.6"</span><span class="token punctuation">,</span>
    <span class="token property">"concurrently"</span><span class="token operator">:</span> <span class="token string">"^5.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"git://github.com/ScriptedAlchemy/html-webpack-plugin#master"</span><span class="token punctuation">,</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"^11.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"git://github.com/webpack/webpack.git#dev-1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.11"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Install the dependancies with:</p><pre><code class="language-bash"><span class="token operator">></span> <span class="token function">yarn</span></code></pre><h2 id="getting-setup-bootstrap-the-spas">Bootstrap The SPAs</h2><p>Next up is bootstraping our SPA React applications. We need to create a <code>src</code> directory in each of our packages that contain the following files:</p><p><strong>packages/application-{a,b}/src/index.js</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./bootstrap'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>packages/application-{a,b}/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>We also need a <code>public</code> directory in each of the packages with the the following html template that we will modify per SPA later:</p><p><strong>packages/application-{a,b}/public/index.html</strong></p><pre><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>Now we can implement our two <code>app.jsx</code> files for each application that will house our shared components:</p><p><strong>packages/application-a/src/app.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">SayHelloFromA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello <span class="token keyword">from</span> Application <span class="token constant">A</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><strong>packages/application-b/src/app.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">SayHelloFromB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello <span class="token keyword">from</span> Application <span class="token constant">B</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>And now finally, we’ll add our base <code>webpack.config.js</code> for each application:</p><p><strong>packages/application-{a,b}/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>From the root of the application, you should now be able to access your two SPAs on <a href="http://localhost:3001">http://localhost:3001</a> and <a href="http://localhost:3002">http://localhost:3002</a> when runing:</p><pre><code class="language-bash"><span class="token operator">></span> <span class="token function">yarn</span> dev</code></pre><h1 id="start-federating">Start Federating</h1><p>Now that we have two independnt SPAs running, let’s go ahead and make each of the SPAs a Fedeated Container as well as Consumer. We accomplish this by utilizing the new <code>ModuleFederationPlugin</code> that is part of the Webpack 5 Core.</p><p>We’ll start by adding the <code>ModuleFederationPlugin</code> to <code>Application A</code>, this will look like:</p><p><strong>packages/application-a/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">'http://localhost:3001/'</span><span class="token punctuation">,</span> <span class="token comment">// New</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// New</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'application_a'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'var'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'application_a'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'SayHelloFromA'</span><span class="token operator">:</span> <span class="token string">'./src/app'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'application_b'</span><span class="token operator">:</span> <span class="token string">'application_b'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>This specifies that <code>Application A</code> exposese it’s App component to the world as a Federated Module called <code>SayHelloFromA</code>, while whenever you import from <code>application_b</code>, those modules should come from <code>Application B</code> at runtime.</p><p>We will do the same thing fro <code>Applicaiton B</code>, specifying that it exposes it’s App component as <code>SayHelloFromB</code> and whenever we import from <code>application_a</code>, those modules should come from <code>Application A</code> at runtime:</p><p><strong>packages/application-b/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">'http://localhost:3002/'</span><span class="token punctuation">,</span> <span class="token comment">// New</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// New</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'application_b'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'var'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'application_b'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'SayHelloFromB'</span><span class="token operator">:</span> <span class="token string">'./src/app'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'application_a'</span><span class="token operator">:</span> <span class="token string">'application_a'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The last step before we can start to utilize the exposed components is to specify for the runtime where the Remote Entries for the Containers you wish to consume are located. We do this by simply adding a script tag to the HTML template of the remotes you wish to consume.</p><p><strong>packages/application-a/public/index.html</strong></p><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- The remote entry for Application B --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:3002/remoteEntry.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre><p><strong>packages/application-b/public/index.html</strong></p><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- The remote entry for Application A --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:3001/remoteEntry.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre><p>The remote entry files are tiny mappings for webpack to resolve the individually imported modules without trasfering unnessesary info. They are also responsible for enabling the sharing of libraries that the packages use, in this case, when <code>Application A</code> requests <code>Application B</code>‘s SayHelloFromB component, we do not send the React or ReactDOM over the wire as <code>Application A</code> already has a copy of it.</p><h2 id="start-federating-consuming-federated-components">Consuming Federated Components</h2><p>Now that our two SPA applications are Container Hosts and Consumers, we can start to consume the shared components. In the webpack config we had specified the names of the containers as <code>application_a</code> and <code>application_b</code>, so that is where we will import the components from.</p><p>Starting with <code>Application A</code>, we can render the <code>SayHelloFromB</code> component like so from within the bootstrap file:</p><p><strong>packages/application-a/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> SayHelloFromB <span class="token keyword">from</span> <span class="token string">'application_b/SayHelloFromB'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>SayHelloFromB <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>Application B</code> will look very similar, just importing from <code>application_a</code> instead:</p><p><strong>packages/application-b/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> SayHelloFromA <span class="token keyword">from</span> <span class="token string">'application_a/SayHelloFromA'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>SayHelloFromA <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="a-few-notes">A Few Notes</h1><p>Looking at the network log for <code>Application A</code> you will see that we load two files from <code>Application B</code>, the <code>remoteEntry.js</code> file, then the <code>977.js</code> that contains the <code>SayHelloFromB</code> component.</p><p><img src="/application-a-network-log.png" alt="Application B Network Log"/></p><p>Visiting <code>Application B</code> for the first time, you’ll notice we have already cached the remoteEntries for both <code>Application B</code> and <code>Application A</code>.</p><p><img src="/application-b-network-log.png" alt="Application B Network Log"/></p><p><strong>You have just created your first Webpack 5 Federated projects. Now go out and build something awesome!</strong></p></article></div></div></div></div><div style="padding:5em 0em" class="ui inverted vertical segment"><div class="ui container"><div class="ui inverted stackable divided grid"><div class="row"><div class="six wide column"><h4 class="ui inverted header">More Awesomeness</h4><div role="list" class="ui inverted link list"><a role="listitem" class="item" href="https://github.com/jacob-ebey">Peek My Github</a><a role="listitem" class="item" href="https://jacob-ebey.js.org/resume">Check My Resume</a><a role="listitem" class="item" href="https://jacob-ebey.js.org/about">Learn More About Me</a></div></div><div class="seven wide column"><h4 class="ui inverted header">Looking To The Future</h4><p>Staying up to date on technology and patterns are important, allowing me to work within your existing stack, or propose one that will scale far into the future.</p><p>Created with <span role="img" aria-label="love">❤️</span>by: Jacob Ebey</p></div></div></div></div></div></div><div class="app-shell_mobile__2TX2x"><div class="ui inverted vertical ui push left sidebar menu"><a href="/" class="item">Home</a><a href="/blog/get-started" class="item">Get Started</a><a rel="noopener noreferrer" target="blank" href="https://medium.com/swlh/webpack-5-module-federation-a-game-changer-to-javascript-architecture-bcdd30e02669" class="item">Learn More</a><a href="/blog" class="item">Blog</a><a href="/videos" class="item">Videos</a></div><div class="pusher"><div class="ui inverted vertical segment"><div class="ui container no-print"><div class="ui large inverted pointing secondary menu"><a class="item"><i aria-hidden="true" class="sidebar icon"></i></a><div class="right item"><a href="https://github.com/module-federation" rel="noopener noreferrer" target="blank" class="ui inverted button" role="button">GitHub</a></div></div></div><div class="hero_hero__3LLIW"><div class="ui text container"><h1>Getting Started With Federated Modules</h1><h2>get up and running in 15 minutes</h2></div></div></div><div class="ui vertical segment article-page_articlePageContent__3XLv8"><div class="ui container stackable middle aligned grid fb"><div class="row"><div class="sixteen wide column"><article class="center-images"><h1 id="a-little-background">A Little Background</h1><p>If you’ve worked as a developer long enough, you’ve ran into the inevitable problem of sharing components between teams. Let’s be real here, how often does this lead to a good experience for anyone?</p><p>I think <a href="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/">Zack Jackson</a>, one of the authors of Webpack Module Federation said it best:</p><blockquote><p>A scalable solution to sharing code between independent applications has never been convenient, and near impossible at scale. The closest we had was externals or DLLPlugin, forcing centralized dependency on a external file. It was a hassle to share code, the separate applications were not truly standalone and usually, a limited number of dependencies are shared. Moreover, sharing actual feature code or components between separately bundled applications is unfeasible, unproductive, and unprofitable.</p></blockquote><p>If you would like to learn more about Webpack Module Federation, you can head over to the and check out <a href="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/" title="https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/">https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/</a>.</p><h1 id="what-we-are-building">What We Are Building</h1><p>We are going to build out two separate Single Page Applications (SPA) that use Module Federation to share components during runtime.</p><p><code>Application A</code> will contain a <code>SayHelloFromA</code> component that will be consumed by <code>Application B</code> while <code>Application B</code> will contain a <code>SayHelloFromB</code> component that will be consumed by <code>ApplicationA</code>. This looks like:</p><p><img src="/get-started-diagram.svg" alt=""/></p><p>This architecture will allow each SPA to be developed and deployed independantly along with instantly recieving updates from other federated applications with zero deployments.</p><h1 id="tl;dr">TL;DR</h1><p>You can find the completed source for this example at <a href="https://github.com/jacob-ebey/federated-libraries-get-started">https://github.com/jacob-ebey/federated-libraries-get-started</a>.</p><h1 id="getting-setup">Getting Setup</h1><p>Let’s start by getting our environment configured. We will be using a yarn mono-repo structure here for simplicity, but the idea behind Module Federation is to allow teams to operate autonomously, so in the real world, your SPA’s would most likely live in their own repositories.</p><p>Start by creating a new project folder with the following <code>package.json</code> to allow us to run our two SPAs at the same time:</p><p><strong>package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"federation-example"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"workspaces"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"packages/*"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"wsrun --parallel start"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"yarn workspaces run build"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"wsrun --parallel dev"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"wsrun"</span><span class="token operator">:</span> <span class="token string">"^5.2.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>We will now create two folders for our SPAs to live in under a new <code>packages</code> directory called <code>application-a</code> and <code>application-b</code>, these will respectively contain the following <code>package.json</code> files:</p><p><strong>packages/application-a/package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"application-a"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"serve dist -p 3001"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \"webpack --watch\" \"serve dist -p 3001\""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@babel/core"</span><span class="token operator">:</span> <span class="token string">"^7.8.6"</span><span class="token punctuation">,</span>
    <span class="token property">"@babel/preset-react"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>
    <span class="token property">"babel-loader"</span><span class="token operator">:</span> <span class="token string">"^8.0.6"</span><span class="token punctuation">,</span>
    <span class="token property">"concurrently"</span><span class="token operator">:</span> <span class="token string">"^5.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"git://github.com/ScriptedAlchemy/html-webpack-plugin#master"</span><span class="token punctuation">,</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"^11.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"git://github.com/webpack/webpack.git#dev-1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.11"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>packages/application-b/package.json</strong></p><pre><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"application-b"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"serve dist -p 3002"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --mode production"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"concurrently \"webpack --watch\" \"serve dist -p 3002\""</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.13.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@babel/core"</span><span class="token operator">:</span> <span class="token string">"^7.8.6"</span><span class="token punctuation">,</span>
    <span class="token property">"@babel/preset-react"</span><span class="token operator">:</span> <span class="token string">"^7.8.3"</span><span class="token punctuation">,</span>
    <span class="token property">"babel-loader"</span><span class="token operator">:</span> <span class="token string">"^8.0.6"</span><span class="token punctuation">,</span>
    <span class="token property">"concurrently"</span><span class="token operator">:</span> <span class="token string">"^5.1.0"</span><span class="token punctuation">,</span>
    <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"git://github.com/ScriptedAlchemy/html-webpack-plugin#master"</span><span class="token punctuation">,</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"^11.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"git://github.com/webpack/webpack.git#dev-1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.11"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Install the dependancies with:</p><pre><code class="language-bash"><span class="token operator">></span> <span class="token function">yarn</span></code></pre><h2 id="getting-setup-bootstrap-the-spas">Bootstrap The SPAs</h2><p>Next up is bootstraping our SPA React applications. We need to create a <code>src</code> directory in each of our packages that contain the following files:</p><p><strong>packages/application-{a,b}/src/index.js</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./bootstrap'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>packages/application-{a,b}/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>We also need a <code>public</code> directory in each of the packages with the the following html template that we will modify per SPA later:</p><p><strong>packages/application-{a,b}/public/index.html</strong></p><pre><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>Now we can implement our two <code>app.jsx</code> files for each application that will house our shared components:</p><p><strong>packages/application-a/src/app.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">SayHelloFromA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello <span class="token keyword">from</span> Application <span class="token constant">A</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p><strong>packages/application-b/src/app.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">SayHelloFromB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello <span class="token keyword">from</span> Application <span class="token constant">B</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>And now finally, we’ll add our base <code>webpack.config.js</code> for each application:</p><p><strong>packages/application-{a,b}/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>From the root of the application, you should now be able to access your two SPAs on <a href="http://localhost:3001">http://localhost:3001</a> and <a href="http://localhost:3002">http://localhost:3002</a> when runing:</p><pre><code class="language-bash"><span class="token operator">></span> <span class="token function">yarn</span> dev</code></pre><h1 id="start-federating">Start Federating</h1><p>Now that we have two independnt SPAs running, let’s go ahead and make each of the SPAs a Fedeated Container as well as Consumer. We accomplish this by utilizing the new <code>ModuleFederationPlugin</code> that is part of the Webpack 5 Core.</p><p>We’ll start by adding the <code>ModuleFederationPlugin</code> to <code>Application A</code>, this will look like:</p><p><strong>packages/application-a/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">'http://localhost:3001/'</span><span class="token punctuation">,</span> <span class="token comment">// New</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// New</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'application_a'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'var'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'application_a'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'SayHelloFromA'</span><span class="token operator">:</span> <span class="token string">'./src/app'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'application_b'</span><span class="token operator">:</span> <span class="token string">'application_b'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>This specifies that <code>Application A</code> exposese it’s App component to the world as a Federated Module called <code>SayHelloFromA</code>, while whenever you import from <code>application_b</code>, those modules should come from <code>Application B</code> at runtime.</p><p>We will do the same thing fro <code>Applicaiton B</code>, specifying that it exposes it’s App component as <code>SayHelloFromB</code> and whenever we import from <code>application_a</code>, those modules should come from <code>Application A</code> at runtime:</p><p><strong>packages/application-b/webpack.config.js</strong></p><pre><code class="language-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ModuleFederationPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/container/ModuleFederationPlugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">'http://localhost:3002/'</span><span class="token punctuation">,</span> <span class="token comment">// New</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// New</span>
    <span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'application_b'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'var'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'application_b'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'remoteEntry.js'</span><span class="token punctuation">,</span>
      exposes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'SayHelloFromB'</span><span class="token operator">:</span> <span class="token string">'./src/app'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      remotes<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'application_a'</span><span class="token operator">:</span> <span class="token string">'application_a'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./public/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The last step before we can start to utilize the exposed components is to specify for the runtime where the Remote Entries for the Containers you wish to consume are located. We do this by simply adding a script tag to the HTML template of the remotes you wish to consume.</p><p><strong>packages/application-a/public/index.html</strong></p><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- The remote entry for Application B --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:3002/remoteEntry.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre><p><strong>packages/application-b/public/index.html</strong></p><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- The remote entry for Application A --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://localhost:3001/remoteEntry.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre><p>The remote entry files are tiny mappings for webpack to resolve the individually imported modules without trasfering unnessesary info. They are also responsible for enabling the sharing of libraries that the packages use, in this case, when <code>Application A</code> requests <code>Application B</code>‘s SayHelloFromB component, we do not send the React or ReactDOM over the wire as <code>Application A</code> already has a copy of it.</p><h2 id="start-federating-consuming-federated-components">Consuming Federated Components</h2><p>Now that our two SPA applications are Container Hosts and Consumers, we can start to consume the shared components. In the webpack config we had specified the names of the containers as <code>application_a</code> and <code>application_b</code>, so that is where we will import the components from.</p><p>Starting with <code>Application A</code>, we can render the <code>SayHelloFromB</code> component like so from within the bootstrap file:</p><p><strong>packages/application-a/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> SayHelloFromB <span class="token keyword">from</span> <span class="token string">'application_b/SayHelloFromB'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>SayHelloFromB <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>Application B</code> will look very similar, just importing from <code>application_a</code> instead:</p><p><strong>packages/application-b/src/bootstrap.jsx</strong></p><pre><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> SayHelloFromA <span class="token keyword">from</span> <span class="token string">'application_a/SayHelloFromA'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>SayHelloFromA <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h1 id="a-few-notes">A Few Notes</h1><p>Looking at the network log for <code>Application A</code> you will see that we load two files from <code>Application B</code>, the <code>remoteEntry.js</code> file, then the <code>977.js</code> that contains the <code>SayHelloFromB</code> component.</p><p><img src="/application-a-network-log.png" alt="Application B Network Log"/></p><p>Visiting <code>Application B</code> for the first time, you’ll notice we have already cached the remoteEntries for both <code>Application B</code> and <code>Application A</code>.</p><p><img src="/application-b-network-log.png" alt="Application B Network Log"/></p><p><strong>You have just created your first Webpack 5 Federated projects. Now go out and build something awesome!</strong></p></article></div></div></div></div><div style="padding:5em 0em" class="ui inverted vertical segment"><div class="ui container"><div class="ui inverted stackable divided grid"><div class="row"><div class="six wide column"><h4 class="ui inverted header">More Awesomeness</h4><div role="list" class="ui inverted link list"><a role="listitem" class="item" href="https://github.com/jacob-ebey">Peek My Github</a><a role="listitem" class="item" href="https://jacob-ebey.js.org/resume">Check My Resume</a><a role="listitem" class="item" href="https://jacob-ebey.js.org/about">Learn More About Me</a></div></div><div class="seven wide column"><h4 class="ui inverted header">Looking To The Future</h4><p>Staying up to date on technology and patterns are important, allowing me to work within your existing stack, or propose one that will scale far into the future.</p><p>Created with <span role="img" aria-label="love">❤️</span>by: Jacob Ebey</p></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"# A Little Background\n\nIf you've worked as a developer long enough, you've ran into the inevitable problem of sharing components between teams. Let's be real here, how often does this lead to a good experience for anyone?\n\nI think [Zack Jackson](https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/), one of the authors of Webpack Module Federation said it best:\n\n\u003e A scalable solution to sharing code between independent applications has never been convenient, and near impossible at scale. The closest we had was externals or DLLPlugin, forcing centralized dependency on a external file. It was a hassle to share code, the separate applications were not truly standalone and usually, a limited number of dependencies are shared. Moreover, sharing actual feature code or components between separately bundled applications is unfeasible, unproductive, and unprofitable.\n\nIf you would like to learn more about Webpack Module Federation, you can head over to the and check out [https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/](https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/ \"https://indepth.dev/webpack-5-module-federation-a-game-changer-in-javascript-architecture/\").\n\n# What We Are Building\n\nWe are going to build out two separate Single Page Applications (SPA) that use Module Federation to share components during runtime.\n\n`Application A` will contain a `SayHelloFromA` component that will be consumed by `Application B` while `Application B` will contain a `SayHelloFromB` component that will be consumed by `ApplicationA`. This looks like:\n\n![](/get-started-diagram.svg \"Architecture Diagram\")\n\nThis architecture will allow each SPA to be developed and deployed independantly along with instantly recieving updates from other federated applications with zero deployments.\n\n# TL;DR\n\nYou can find the completed source for this example at [https://github.com/jacob-ebey/federated-libraries-get-started](https://github.com/jacob-ebey/federated-libraries-get-started).\n\n# Getting Setup\n\nLet's start by getting our environment configured. We will be using a yarn mono-repo structure here for simplicity, but the idea behind Module Federation is to allow teams to operate autonomously, so in the real world, your SPA's would most likely live in their own repositories.\n\nStart by creating a new project folder with the following `package.json` to allow us to run our two SPAs at the same time:\n\n**package.json**\n\n```json\n{\n  \"name\": \"federation-example\",\n  \"private\": true,\n  \"workspaces\": [\n    \"packages/*\"\n  ],\n  \"scripts\": {\n    \"start\": \"wsrun --parallel start\",\n    \"build\": \"yarn workspaces run build\",\n    \"dev\": \"wsrun --parallel dev\"\n  },\n  \"devDependencies\": {\n    \"wsrun\": \"^5.2.0\"\n  }\n}\n```\n\nWe will now create two folders for our SPAs to live in under a new `packages` directory called `application-a` and `application-b`, these will respectively contain the following `package.json` files:\n\n**packages/application-a/package.json**\n\n```json\n{\n  \"name\": \"application-a\",\n  \"version\": \"1.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"serve dist -p 3001\",\n    \"build\": \"webpack --mode production\",\n    \"dev\": \"concurrently \\\"webpack --watch\\\" \\\"serve dist -p 3001\\\"\"\n  },\n  \"dependencies\": {\n    \"react\": \"^16.13.1\",\n    \"react-dom\": \"^16.13.1\"\n  },\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.8.6\",\n    \"@babel/preset-react\": \"^7.8.3\",\n    \"babel-loader\": \"^8.0.6\",\n    \"concurrently\": \"^5.1.0\",\n    \"html-webpack-plugin\": \"git://github.com/ScriptedAlchemy/html-webpack-plugin#master\",\n    \"serve\": \"^11.3.0\",\n    \"webpack\": \"git://github.com/webpack/webpack.git#dev-1\",\n    \"webpack-cli\": \"^3.3.11\"\n  }\n}\n```\n**packages/application-b/package.json**\n\n```json\n{\n  \"name\": \"application-b\",\n  \"version\": \"1.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"serve dist -p 3002\",\n    \"build\": \"webpack --mode production\",\n    \"dev\": \"concurrently \\\"webpack --watch\\\" \\\"serve dist -p 3002\\\"\"\n  },\n  \"dependencies\": {\n    \"react\": \"^16.13.1\",\n    \"react-dom\": \"^16.13.1\"\n  },\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.8.6\",\n    \"@babel/preset-react\": \"^7.8.3\",\n    \"babel-loader\": \"^8.0.6\",\n    \"concurrently\": \"^5.1.0\",\n    \"html-webpack-plugin\": \"git://github.com/ScriptedAlchemy/html-webpack-plugin#master\",\n    \"serve\": \"^11.3.0\",\n    \"webpack\": \"git://github.com/webpack/webpack.git#dev-1\",\n    \"webpack-cli\": \"^3.3.11\"\n  }\n}\n```\n\nInstall the dependancies with:\n\n```bash\n\u003e yarn\n```\n\n## Bootstrap The SPAs\n\nNext up is bootstraping our SPA React applications. We need to create a `src` directory in each of our packages that contain the following files:\n\n**packages/application-{a,b}/src/index.js**\n\n```javascript\nimport('./bootstrap');\n```\n**packages/application-{a,b}/src/bootstrap.jsx**\n\n```javascript\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\n\nReactDOM.render(\u003cApp /\u003e, document.getElementById('root'));\n```\nWe also need a `public` directory in each of the packages with the the following html template that we will modify per SPA later:\n\n**packages/application-{a,b}/public/index.html**\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003cdiv id=\"root\"\u003e\u003c/div\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\nNow we can implement our two `app.jsx` files for each application that will house our shared components:\n\n**packages/application-a/src/app.jsx**\n\n```javascript\nimport React from 'react';\n\nexport default function SayHelloFromA() {\n  return \u003ch1\u003eHello from Application A!\u003c/h1\u003e;\n}\n```\n\n**packages/application-b/src/app.jsx**\n\n```javascript\nimport React from 'react';\n\nexport default function SayHelloFromB() {\n  return \u003ch1\u003eHello from Application B!\u003c/h1\u003e;\n}\n```\n\nAnd now finally, we'll add our base `webpack.config.js` for each application:\n\n**packages/application-{a,b}/webpack.config.js**\n\n```javascript\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');\n\nconst mode = process.env.NODE_ENV || 'production';\n\nmodule.exports = {\n  mode,\n  entry: './src/index',\n  devtool: 'source-map',\n  optimization: {\n    minimize: mode === 'production',\n  },\n  resolve: {\n    extensions: ['.jsx', '.js', '.json'],\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        loader: require.resolve('babel-loader'),\n        options: {\n          presets: [require.resolve('@babel/preset-react')],\n        },\n      },\n    ],\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n};\n```\n\nFrom the root of the application, you should now be able to access your two SPAs on [http://localhost:3001](http://localhost:3001) and [http://localhost:3002](http://localhost:3002) when runing:\n\n```bash\n\u003e yarn dev\n```\n\n# Start Federating\n\nNow that we have two independnt SPAs running, let's go ahead and make each of the SPAs a Fedeated Container as well as Consumer. We accomplish this by utilizing the new `ModuleFederationPlugin` that is part of the Webpack 5 Core.\n\nWe'll start by adding the `ModuleFederationPlugin` to `Application A`, this will look like:\n\n**packages/application-a/webpack.config.js**\n\n```javascript\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');\n\nconst mode = process.env.NODE_ENV || 'production';\n\nmodule.exports = {\n  mode,\n  entry: './src/index',\n  output: {\n    publicPath: 'http://localhost:3001/', // New\n  },\n  devtool: 'source-map',\n  optimization: {\n    minimize: mode === 'production',\n  },\n  resolve: {\n    extensions: ['.jsx', '.js', '.json'],\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        loader: require.resolve('babel-loader'),\n        options: {\n          presets: [require.resolve('@babel/preset-react')],\n        },\n      },\n    ],\n  },\n\n  plugins: [\n    // New\n    new ModuleFederationPlugin({\n      name: 'application_a',\n      library: { type: 'var', name: 'application_a' },\n      filename: 'remoteEntry.js',\n      exposes: {\n        'SayHelloFromA': './src/app',\n      },\n      remotes: {\n        'application_b': 'application_b',\n      },\n      shared: ['react', 'react-dom'],\n    }),\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n};\n```\n\nThis specifies that `Application A` exposese it's App component to the world as a Federated Module called `SayHelloFromA`, while whenever you import from `application_b`, those modules should come from `Application B` at runtime.\n\nWe will do the same thing fro `Applicaiton B`, specifying that it exposes it's App component as `SayHelloFromB` and whenever we import from `application_a`, those modules should come from `Application A` at runtime:\n\n**packages/application-b/webpack.config.js**\n\n```javascript\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');\n\nconst mode = process.env.NODE_ENV || 'production';\n\nmodule.exports = {\n  mode,\n  entry: './src/index',\n  output: {\n    publicPath: 'http://localhost:3002/', // New\n  },\n  devtool: 'source-map',\n  optimization: {\n    minimize: mode === 'production',\n  },\n  resolve: {\n    extensions: ['.jsx', '.js', '.json'],\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        loader: require.resolve('babel-loader'),\n        options: {\n          presets: [require.resolve('@babel/preset-react')],\n        },\n      },\n    ],\n  },\n\n  plugins: [\n    // New\n    new ModuleFederationPlugin({\n      name: 'application_b',\n      library: { type: 'var', name: 'application_b' },\n      filename: 'remoteEntry.js',\n      exposes: {\n        'SayHelloFromB': './src/app',\n      },\n      remotes: {\n        'application_a': 'application_a',\n      },\n      shared: ['react', 'react-dom'],\n    }),\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n};\n```\n\nThe last step before we can start to utilize the exposed components is to specify for the runtime where the Remote Entries for the Containers you wish to consume are located. We do this by simply adding a script tag to the HTML template of the remotes you wish to consume.\n\n**packages/application-a/public/index.html**\n\n```html\n\u003chead\u003e\n  \u003c!-- The remote entry for Application B --\u003e\n  \u003cscript src=\"http://localhost:3002/remoteEntry.js\"\u003e\u003c/script\u003e    \n\u003c/head\u003e\n```\n\n**packages/application-b/public/index.html**\n\n```html\n\u003chead\u003e\n  \u003c!-- The remote entry for Application A --\u003e\n  \u003cscript src=\"http://localhost:3001/remoteEntry.js\"\u003e\u003c/script\u003e    \n\u003c/head\u003e\n```\n\nThe remote entry files are tiny mappings for webpack to resolve the individually imported modules without trasfering unnessesary info. They are also responsible for enabling the sharing of libraries that the packages use, in this case, when `Application A` requests `Application B`'s SayHelloFromB component, we do not send the React or ReactDOM over the wire as `Application A` already has a copy of it.\n\n## Consuming Federated Components\n\nNow that our two SPA applications are Container Hosts and Consumers, we can start to consume the shared components. In the webpack config we had specified the names of the containers as `application_a` and `application_b`, so that is where we will import the components from.\n\nStarting with `Application A`, we can render the `SayHelloFromB` component like so from within the bootstrap file:\n\n**packages/application-a/src/bootstrap.jsx**\n\n```javascript\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport SayHelloFromB from 'application_b/SayHelloFromB';\n\nimport App from './app';\n\nReactDOM.render(\n  \u003c\u003e\n  \t\u003cApp /\u003e\n  \t\u003cSayHelloFromB /\u003e\n  \u003c/\u003e,\n  document.getElementById('root')\n);\n```\n\n`Application B` will look very similar, just importing from `application_a` instead:\n\n**packages/application-b/src/bootstrap.jsx**\n\n```javascript\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport SayHelloFromA from 'application_a/SayHelloFromA';\n\nimport App from './app';\n\nReactDOM.render(\n  \u003c\u003e\n    \u003cApp /\u003e\n    \u003cSayHelloFromA /\u003e\n  \u003c/\u003e,\n  document.getElementById('root')\n);\n```\n\n# A Few Notes\n\nLooking at the network log for `Application A` you will see that we load two files from `Application B`, the `remoteEntry.js` file, then the `977.js` that contains the `SayHelloFromB` component.\n\n![Application B Network Log](/application-a-network-log.png)\n\nVisiting `Application B` for the first time, you'll notice we have already cached the remoteEntries for both `Application B` and `Application A`.\n\n![Application B Network Log](/application-b-network-log.png)\n\n**You have just created your first Webpack 5 Federated projects. Now go out and build something awesome!**","data":{"title":"Getting Started With Federated Modules","secondary_title":"get up and running in 15 minutes","author":"Jacob Ebey","date":"2020-03-30"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"get-started"},"buildId":"RZ7i1qTAhq7GmlQITB0nI","assetPrefix":"site","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="site/_next/static/runtime/polyfills-294e730434490728265b.js"></script><script async="" data-next-page="/blog/[slug]" src="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/pages/blog/%5Bslug%5D.js"></script><script async="" data-next-page="/_app" src="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/pages/_app.js"></script><script src="site/_next/static/runtime/webpack-b65cab0b00afd201cbda.js" async=""></script><script src="site/_next/static/chunks/framework.4503cc20512dbab0b6d3.js" async=""></script><script src="site/_next/static/chunks/81873460.37da1e6c94fa5227f4d3.js" async=""></script><script src="site/_next/static/chunks/828ff0247e156aba75f40048f634625636aeb451.3b5c7d87c17d462fd737.js" async=""></script><script src="site/_next/static/runtime/main-8e344e0f74bc3384d55f.js" async=""></script><script src="site/_next/static/chunks/ab6e12f8.ca343003e1fa52c820f5.js" async=""></script><script src="site/_next/static/chunks/15c735495e1507fead7e18fb8ddaf582d98d10e6.964ebf25ef8cc2262175.js" async=""></script><script src="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/_buildManifest.js" async=""></script><script src="site/_next/static/RZ7i1qTAhq7GmlQITB0nI/_ssgManifest.js" async=""></script></body></html>